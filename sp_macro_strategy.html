<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S&P Macro Strategy</title>



    <link rel="stylesheet" href="css/metacognition_.css">


    <!-- icon -->
    <link rel="shortcut icon" type="image/jpg" href="images/favicon.PNG" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


    <!-- bootstrap css -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    
    <!-- Load mathjax -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS_HTML"></script>
    <!-- MathJax configuration -->
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>
    <!-- End of mathjax configuration -->
    

</head>

<body>

    <div class="flexbox">
        <!-- navbar -->
        <div id="mySidenav" class="sidebar-nav flexbox-item-1">

            <div class="contentblock">

                <div class="sidebar-nav-item" id="blogtitle">Ryan's Blog</div>
                <div class="sidebar-nav-item" id="caption">A Journey of Learning</div>
                <img class="sidebar-nav-item" id="logo" src="images/R.png" height=90>


                <div class="sidebaritems">
                    <a class="sidebar-nav-item" href="index.html">Home<i class="fa fa-home" aria-hidden="true" id="homelogo"></i></a>
                    <a class="sidebar-nav-item" href="post_archive.html">Post Archive</a>
                    <a class="sidebar-nav-item" href="about.html">About</a>
                    <a class="sidebar-nav-item" href="contact.html">Contact</a>
                    <p class="sidebar-nav-item" id="credits">Â© Ryan Chew 2020. Website in progress.</p>
                </div>
            </div>
        </div>

        <main class="flexbox-item-2">
            <nav class="section-nav">
                <p><i>Table of Contents</i></p>
                <ol>
                    <li><a href="#Strategy Overview">Strategy Overview</a></li>
                    <li><a href="#Regimes">Regimes</a></li>
                    <li><a href="#Signal">Signal</a></li>
                    <li><a href="#Performance">Performance</a></li>
                    <li><a href="#Conclusion">Conclusion</a></li>
                </ol>

            </nav>

            <h1>S&P Macro Regime Strategy</h1>
            <div class="post-metadata">
                <span style="display: inline" class="post-date">01 March 2023 &middot;  10 min read</span> &emsp;
                <span style="display:inline">[ Quantitative Finance ]</span>
            </div>

            <section id="Strategy Overview">
                <h2>Strategy Overview</h2>
                <p>This post was adapted from the technical take-home project given by AVM Capital (macro hedge fund) for the Quant Analyst Intern position. The original objective was: given some macroeconomic data of inflation and growth, come up with an ideal hedging strategy for the S&P. After some discussion, this was adapted to: come up with a strategy to beat the benchmark of long S&P by constructing a long-short portfolio consisting of the S&P 500, Gold, and US10Y treasury bonds. </p>
                <p>The data given to me was daily close of S&P, quarterly close of Gold, daily yields of US10Y bonds, quarterly GDP YoY change figures and monthly CPI YoY change figures, from 1970 to 2020. Thus, my strategy was to rebalance the portfolio quarterly based on the current regime the quarter was in, determined by whether growth or inflation was rising/falling from the previous quarter. The in-sample period is from 1970 to 2012 and the out-sample period is from 2013-2020. I then evaluate the out-sample performance based on the rolling Sharpe, rolling information ratio and tracking error.</p>
                <p><img src="images/sp_macro/graph_macro_indicators.png", height="450", class="center"></p>
            </section>

            <section id="Regimes">
                <h2>Regimes</h2>
                <p>First, we create quarterly log returns:</p>
                <p><img src="images/sp_macro/code_returns.png", height="250", class="center"></p>
                <p>Next, given the CPI and GDP data, we can classify any period in this time horizon into whether it has rising or falling growth or inflation relative to the previous year. We categorize an indicator as rising if it is greater than the previous quarter and falling if it is lesser than the previous quarters values. Thus, this gives us very simplistic categories:
                    <ol>
                        <li>Bearish - Falling growth, falling inflation</li>
                        <li>Stagflation - Falling growth, rising inflation  </li>
                        <li>Bullish - Rising growth, falling inflation  </li>
                        <li>Overheating - Rising growth, rising inflation </li>
                    </ol>
                </p>
                <p><img src="images/sp_macro/code_regimes.png", height="325", class="center"></p>
            </section>
    
            <section id="Signal">
                <h2>Signal</h2>
                <p>The strategy emits 4 fixed alphas (one for each regime) which are normalized so their absolute values sum to unity for long/short portfolio weights to take in each regime. The alpha vectors are naively created from normalizing the Sharpe ratio of the returns during each regime (for all time periods) on the training data.</p>
                <img src="images/sp_macro/code_signal.png", height="325", class="center">
                <p>This is a simple method of creating an alpha that uses a summary statistic (Sharpe) of returns for each regime. However, the returns of each regime are not contiguous, because the regimes switch every quarter or so. An alternative method would be MVO, but will stick with the former. The barchart shows the portfolio allocation in each regime.</p>
                <p><img src="images/sp_macro/graph_weights.png", height="400", class="center"></p>
                <!-- <p>TODO - PROPER COMMENTARY! We can see that in regime 1 (high inflation, low growth), gold is heavily weighted. In regime 3 (high growth, high inflation), the S&P is shorted.</p> -->
            </section>

          
            <section id="Performance">
                <h2>Performance</h2>
                <p>Once we compute the return series for our strategy, we can compare the performance to long S&P only. Since the signal is fixed (4 alpha vectors), there is no quantile analysis or other diagnostics.</p>
                <img src="images/sp_macro/code_performance.png", height="360", class="center">
                <p><img src="images/sp_macro/graph_is_cumrets.png", height="475", class="center"></p>
                <p><img src="images/sp_macro/graph_oos_cumrets.png", height="475", class="center"></p>
                <p>Unfortunately, the strategy does overfit. While overall cumulative returns for both in-sample and out-sample period does beat the S&P, the tracking error plots show many instances where it had lesser returns than the market index.</p>
                <p><img src="images/sp_macro/graph_tracking_error.png", height="450", class="center"></p>
                <p><img src="images/sp_macro/graph_tracking_error_histogram.png", height="450", class="center"></p>
                <p>Looking at the out-sample 1Y rolling information ratio and Sharpe ratio, we see more evidence of the strategy failing to perform in the Covid era and beyond, showing a decrease in 2020 onwards with a slight positive upturn at the end of the out-sample period (mid 2022). Thus, it seems like a case of overfitting.</p>
                <p><img src="images/sp_macro/graph_oos_ir.png", height="450", class="center"></p>
                <p><img src="images/sp_macro/graph_oos_sharpe.png", height="450", class="center"></p>
            </section>

            <section id="Conclusion">
                <h2>Conclusion</h2>
                <p>Unfortunately, the strategy seems to be very naive and underperforms with negative rolling IR and Sharpe towards the end of the out-sample period due to overfitting. Also, the method of classifying regimes is simple and naive.</p>
                <p>However, this was a good exercise in getting my hands dirty with some financial data and playing around. Furthermore, it was made aware to me that my strategy had lookahead bias, as the quarterly GDP/CPI YoY figures were usually released after a quarter had already started. Thus, I was prompted that possibly lookahead macro indicators could be used as proxies of inflation and growth.</p>
                <p>Unfortunately, they were looking for a graduate student (e.g MFE) for a 6 months internship, and I had already graduated only recently. However, they did mention the methodology was sound.</p>
            </section>
            </main>
    </div>


    <script src="js/fundamental_analysis.js"></script>

</body>

</html>